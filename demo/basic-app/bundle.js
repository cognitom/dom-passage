!function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t){this.value=t}function e(e){var n,r;function i(n,r){try{var a=e[n](r),u=a.value;u instanceof t?Promise.resolve(u.value).then(function(t){i("next",t)},function(t){i("throw",t)}):o(a.done?"return":"normal",a.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}this._invoke=function(t,e){return new Promise(function(o,a){var u={key:t,arg:e,resolve:o,reject:a,next:null};r?r=r.next=u:(n=r=u,i(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),n=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})}},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},a=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=new Map,c=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;r(this,t),this.strings=e,this.values=n,this.type=i,this.partCallback=o}return i(t,[{key:"getHTML",value:function(){for(var t,e,n=this.strings.length-1,r="",i=!0,o=0;o<n;o++){var a=this.strings[o];r+=a;var u=(void 0,void 0,e=(t=a).lastIndexOf(">"),t.indexOf("<",e+1)>-1?t.length:e);r+=(i=u>-1?u<a.length:i)?h:v}return r+=this.strings[n]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}();!function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}u(e,c),i(e,[{key:"getHTML",value:function(){return"<svg>"+a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getHTML",this).call(this)+"</svg>"}},{key:"getTemplateElement",value:function(){var t=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTemplateElement",this).call(this),n=t.content,r=n.firstChild;return n.removeChild(r),T(n,r.firstChild),t}}])}();function f(t){var e=l.get(t.type);void 0===e&&(e=new Map,l.set(t.type,e));var n=e.get(t.strings);return void 0===n&&(n=new m(t,t.getTemplateElement()),e.set(t.strings,n)),n}var v="{{lit-"+String(Math.random()).slice(2)+"}}",h="\x3c!--"+v+"--\x3e",p=new RegExp(v+"|"+h),d=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;var y=function t(e,n,i,o,a){r(this,t),this.type=e,this.index=n,this.name=i,this.rawName=o,this.strings=a},m=function t(e,n){r(this,t),this.parts=[],this.element=n;for(var i=this.element.content,o=document.createTreeWalker(i,133,null,!1),a=-1,u=0,s=[],l=void 0,c=void 0;o.nextNode();){a++,l=c;var f=c=o.currentNode;if(1===f.nodeType){if(!f.hasAttributes())continue;for(var h=f.attributes,m=0,b=0;b<h.length;b++)h[b].value.indexOf(v)>=0&&m++;for(;m-- >0;){var g=e.strings[u],x=d.exec(g)[1],w=h.getNamedItem(x),_=w.value.split(p);this.parts.push(new y("attribute",a,w.name,x,_)),f.removeAttribute(w.name),u+=_.length-1}}else if(3===f.nodeType){var k=f.nodeValue;if(k.indexOf(v)<0)continue;var N=f.parentNode,O=k.split(p),T=O.length-1;u+=T,f.textContent=O[T];for(var S=0;S<T;S++)N.insertBefore(document.createTextNode(O[S]),f),this.parts.push(new y("node",a++))}else if(8===f.nodeType&&f.nodeValue===v){var V=f.parentNode,j=f.previousSibling;null===j||j!==l||j.nodeType!==Node.TEXT_NODE?V.insertBefore(document.createTextNode(""),f):a--,this.parts.push(new y("node",a++)),s.push(f),null===f.nextSibling?V.insertBefore(document.createTextNode(""),f):a--,c=l,u++}}var P=!0,C=!1,A=void 0;try{for(var E,L=s[Symbol.iterator]();!(P=(E=L.next()).done);P=!0){var M=E.value;M.parentNode.removeChild(M)}}catch(t){C=!0,A=t}finally{try{!P&&L.return&&L.return()}finally{if(C)throw A}}},b=function(t,e){return g(e)?(e=e(t),x):null===e?void 0:e},g=function(t){return"function"==typeof t&&!0===t.__litDirective},x={},w=function(e){return null===e||!("object"===(void 0===e?"undefined":t(e))||"function"==typeof e)},_=function(){function t(e,n,i,o){r(this,t),this.instance=e,this.element=n,this.name=i,this.strings=o,this.size=o.length-1,this._previousValues=[]}return i(t,[{key:"_interpolate",value:function(t,e){for(var n=this.strings,r=n.length-1,i="",o=0;o<r;o++){i+=n[o];var a=b(this,t[e+o]);if(a&&a!==x&&(Array.isArray(a)||"string"!=typeof a&&a[Symbol.iterator])){var u=!0,s=!1,l=void 0;try{for(var c,f=a[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){i+=c.value}}catch(t){s=!0,l=t}finally{try{!u&&f.return&&f.return()}finally{if(s)throw l}}}else i+=a}return i+n[r]}},{key:"_equalToPreviousValues",value:function(t,e){for(var n=e;n<e+this.size;n++)if(this._previousValues[n]!==t[n]||!w(t[n]))return!1;return!0}},{key:"setValue",value:function(t,e){if(!this._equalToPreviousValues(t,e)){var n=this.strings,r=void 0;2===n.length&&""===n[0]&&""===n[1]?(r=b(this,t[e]),Array.isArray(r)&&(r=r.join(""))):r=this._interpolate(t,e),r!==x&&this.element.setAttribute(this.name,r),this._previousValues=t}}}]),t}(),k=function(){function t(e,n,i){r(this,t),this.instance=e,this.startNode=n,this.endNode=i,this._previousValue=void 0}return i(t,[{key:"setValue",value:function(t){if((t=b(this,t))!==x)if(w(t)){if(t===this._previousValue)return;this._setText(t)}else t instanceof c?this._setTemplateResult(t):Array.isArray(t)||t[Symbol.iterator]?this._setIterable(t):t instanceof Node?this._setNode(t):void 0!==t.then?this._setPromise(t):this._setText(t)}},{key:"_insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"_setNode",value:function(t){this._previousValue!==t&&(this.clear(),this._insert(t),this._previousValue=t)}},{key:"_setText",value:function(t){var e=this.startNode.nextSibling;t=void 0===t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._setNode(document.createTextNode(t)),this._previousValue=t}},{key:"_setTemplateResult",value:function(t){var e=this.instance._getTemplate(t),n=void 0;this._previousValue&&this._previousValue.template===e?n=this._previousValue:(n=new O(e,this.instance._partCallback,this.instance._getTemplate),this._setNode(n._clone()),this._previousValue=n),n.update(t.values)}},{key:"_setIterable",value:function(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);var n=this._previousValue,r=0,i=!0,o=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,c=n[r];if(void 0===c){var f=this.startNode;if(r>0)f=n[r-1].endNode=document.createTextNode(""),this._insert(f);c=new t(this.instance,f,this.endNode),n.push(c)}c.setValue(l),r++}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}if(0===r)this.clear(),this._previousValue=void 0;else if(r<n.length){var v=n[r-1];n.length=r,this.clear(v.endNode.previousSibling),v.endNode=this.endNode}}},{key:"_setPromise",value:function(t){var e=this;this._previousValue=t,t.then(function(n){e._previousValue===t&&e.setValue(n)})}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;S(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),N=function(t,e,n){if("attribute"===e.type)return new _(t,n,e.name,e.strings);if("node"===e.type)return new k(t,n,n.nextSibling);throw new Error("Unknown part type "+e.type)},O=function(){function t(e,n,i){r(this,t),this._parts=[],this.template=e,this._partCallback=n,this._getTemplate=i}return i(t,[{key:"update",value:function(t){var e=0,n=!0,r=!1,i=void 0;try{for(var o,a=this._parts[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;void 0===u.size?(u.setValue(t[e]),e++):(u.setValue(t,e),e+=u.size)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"_clone",value:function(){var t=document.importNode(this.template.element.content,!0),e=this.template.parts;if(e.length>0)for(var n=document.createTreeWalker(t,133,null,!1),r=-1,i=0;i<e.length;i++){for(var o=e[i];r<o.index;)r++,n.nextNode();this._parts.push(this._partCallback(this,o,n.currentNode))}return t}}]),t}(),T=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e;i!==n;){var o=i.nextSibling;t.insertBefore(i,r),i=o}},S=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e;r!==n;){var i=r.nextSibling;t.removeChild(r),r=i}};function V(t,e){return t[e]||t.getAttribute(e)}function j(t,e){var n=t.split("."),r=e,i=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){if(void 0===(r=r[u.value]))return}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}var P={get:function(e,n){return"object"===t(e[n])&&null!==e[n]?new Proxy(e[n],P):e[n]},set:function(t,e,n){return!1}};function C(t){if(!t||"[object Object]"!==t.toString())return!1;if(t.constructor){var e=t.hasOwnProperty("constructor"),n=t.constructor.prototype,r=n&&n.hasOwnProperty("isPrototypeOf");if(!e&&!r)return!1}var i=void 0;for(i in t);return void 0===i||t.hasOwnProperty(i)}function A(t,e){return new Observable(function(n){var r=function(){return n.next.apply(n,arguments)};return t.addEventListener(e,r),function(){return t.removeEventListener(e,r)}})}function E(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(function e(n,r){var i=!0;var o=!1;var a=void 0;try{for(var u,s=Object.keys(n)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;"function"==typeof r[l]&&void 0!==n[l]&&null!==n[l]?n[l]=r[l](n[l]):"object"===t(r[l])&&"object"===t(n[l])&&e(n[l],r[l])}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}(e,n),e):e}var L=new WeakMap,M=new WeakMap,U=new WeakMap;function z(t,e){var n=M.get(t);if(n[e]){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=!0,u=!1,s=void 0;try{for(var l,c=n[e][Symbol.iterator]();!(a=(l=c.next()).done);a=!0){l.value.apply(void 0,i)}}catch(t){u=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(u)throw s}}}}var R=function(){function t(e){var n=e.initialState,i=void 0===n?{}:n,o=e.sanitizers,a=void 0===o?{}:o,u=e.actions,s=void 0===u?{}:u;r(this,t),L.set(this,E(i,a)),M.set(this,{}),this.sanitizers=a,this.actions=s,this.commit=this.commit.bind(this),this.dispatch=this.dispatch.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this)}return i(t,[{key:"commit",value:function(t){var e=L.get(this);E(t,this.sanitizers),function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=!0,a=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;if(null!=c)for(var f in c){var v=e[f],h=c[f];if(e!==h)if(h&&(C(h)||Array.isArray(h))){var p=Array.isArray(h)?v&&Array.isArray(v)?v:[]:v&&C(v)?v:{};e[f]=t(p,h)}else void 0!==h&&(e[f]=h)}}}catch(t){a=!0,u=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}return e}(e,t),z(this,"render",e)}},{key:"dispatch",value:function(t){var e,r=this;return new Observable((e=n(regeneratorRuntime.mark(function e(n){var i,o,a,u,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=j(t,r.actions)){e.next=4;break}return e.abrupt("return",n.complete());case 4:if(f=L.get(r),o=new Proxy(f,P),a=i(o),!("function"==typeof a[Symbol.asyncIterator])){e.next=20;break}case 8:return e.next=10,a.next();case 10:if(u=e.sent,s=u.value,l=u.done,s&&n.next(s),!l){e.next=16;break}return e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=29;break;case 20:if(!a.then){e.next=26;break}return e.next=23,a;case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=a;case 27:(c=e.t0)&&n.next(c);case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),n.error(e.t1);case 34:n.complete();case 35:case"end":return e.stop()}var f},e,r,[[0,31]])})),function(t){return e.apply(this,arguments)}))}},{key:"start",value:function(){U.get(this)||(z(this,"render",L.get(this)),U.set(this,!0))}},{key:"stop",value:function(){var t=M.get(this);for(var e in t)delete t[e];U.set(this,!1)}},{key:"addEventListener",value:function(t,e){var n=M.get(this);n[t]||(n[t]=[]),n[t].push(e)}},{key:"removeEventListener",value:function(t,e){var n=M.get(this);if(n[t]){var r=n[t].indexOf(e);r>=0&&n[t].splice(r)}}}]),t}();function I(t){return new Promise(function(e){return setTimeout(function(){return e()},t)})}var W,H,B=function(t,e,n){if("attribute"===e.type){if(e.rawName.startsWith("on-")){var r=e.rawName.slice(3);return new q(t,n,r)}if(e.name.endsWith("$")){var i=e.name.slice(0,-1);return new _(t,n,i,e.strings)}if(e.name.endsWith("?")){var o=e.name.slice(0,-1);return new D(t,n,o,e.strings)}return new F(t,n,e.rawName,e.strings)}return N(t,e,n)},D=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,_),i(e,[{key:"setValue",value:function(t,e){var n=this.strings;if(2!==n.length||""!==n[0]||""!==n[1])throw new Error("boolean attributes can only contain a single expression");var r=b(this,t[e]);r!==x&&(r?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name))}}]),e}(),F=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,_),i(e,[{key:"setValue",value:function(t,e){var n=this.strings,r=void 0;this._equalToPreviousValues(t,e)||((r=2===n.length&&""===n[0]&&""===n[1]?b(this,t[e]):this._interpolate(t,e))!==x&&(this.element[this.name]=r),this._previousValues=t)}}]),e}(),q=function(){function t(e,n,i){r(this,t),this.instance=e,this.element=n,this.eventName=i}return i(t,[{key:"setValue",value:function(t){var e=b(this,t),n=this._listener;e!==n&&(this._listener=e,null!=n&&this.element.removeEventListener(this.eventName,n),null!=e&&this.element.addEventListener(this.eventName,e))}}]),t}(),X=(W=["\n  <h1>Hello ",'!</h1>\n  <input name="person.first" value="','">\n  <input name="person.last" value="','">\n  <input name="city" value="','">\n  <button name="retrieve" disabled="','">Click me!</button>\n  <p>',"</p>\n  <p>",'</p>\n  <button name="countUp">1. Count up now!</button>\n  <button name="countUp2">2. Count up two sec later!</button>\n  <button name="countUp3" disabled="','">',"</button>\n"],H=["\n  <h1>Hello ",'!</h1>\n  <input name="person.first" value="','">\n  <input name="person.last" value="','">\n  <input name="city" value="','">\n  <button name="retrieve" disabled="','">Click me!</button>\n  <p>',"</p>\n  <p>",'</p>\n  <button name="countUp">1. Count up now!</button>\n  <button name="countUp2">2. Count up two sec later!</button>\n  <button name="countUp3" disabled="','">',"</button>\n"],Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(H)}}))),$=function(t){return function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new c(t,n,"html",B)}(X,t.person.full,t.person.first,t.person.last,t.city,!t.ok,t.message,t.count,t.waiting,t.waiting?"Now waiting...":"3. Count up now and later!")},G=new R({initialState:{person:{first:"",last:"",get full(){return this.first+" "+this.last}},city:"",get ok(){return!!this.person.first&&!!this.city},count:0,waiting:!1},sanitizers:{person:{first:function(t){return t.toUpperCase()},last:function(t){return t.toUpperCase()}},city:function(t){return t.toLowerCase()}},actions:{countUp:function(t){return{count:t.count+1}},countUp2:function(){var t=n(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(2e3);case 2:return t.abrupt("return",{count:e.count+1});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),countUp3:function(t){var n=this;return e.wrap(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,{waiting:!0,count:t.count+1};case 2:return n.next=4,e.await(I(2e3));case 4:return n.next=6,{waiting:!1,count:t.count+1};case 6:case"end":return n.stop()}},r,n)}))()}}}),J=document.body;A(J,"change").map(function(t){var e=t.target,n=V(e,"name");return n?function(t,e){var n=t.split("."),r=e,i=!0,a=!1,u=void 0;try{for(var s,l=n.reverse()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;r=o({},c,r)}}catch(t){a=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}return r}(n,V(e,"value")):null}).subscribe(G.commit),A(J,"click").map(function(t){return V(t.target,"name")}).flatMap(G.dispatch).subscribe(G.commit),A(G,"render").map(function e(n){if(!n)return n;var r=!0,i=!1,o=void 0;try{for(var a,u=Object.keys(n)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;void 0===n[s]||null===n[s]?n[s]="":"object"===t(n[s])&&e(n[s])}}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}).subscribe(function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,r=n(t),i=e.__templateInstance;if(void 0===i||i.template!==r||i._partCallback!==t.partCallback){i=new O(r,t.partCallback,n),e.__templateInstance=i;var o=i._clone();i.update(t.values),S(e,e.firstChild),e.appendChild(o)}else i.update(t.values)}($(t),J)}),G.start()}();
//# sourceMappingURL=bundle.js.map
